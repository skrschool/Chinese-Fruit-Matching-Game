<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chinese Fruit Matching Game</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url("https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+Thai:wght@400;700&display=swap");

    body {
      font-family: "Noto Sans SC", "Noto Sans Thai", sans-serif;
      background-color: #f5f0e6;
      background-image: radial-gradient(#f8d7da 1px, transparent 1px),
        radial-gradient(#f8d7da 1px, transparent 1px);
      background-size: 20px 20px;
      background-position: 0 0, 10px 10px;
      margin: 0;
      overflow-x: hidden;
    }

    .card {
      perspective: 1000px;
      width: 100%;
      aspect-ratio: 3/4;
      max-width: 120px;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      border-radius: 10px;
    }

    .card.flipped .card-inner {
      transform: rotateY(180deg);
    }

    .card-front,
    .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      text-align: center;
      padding: 10px;
    }

    .card-front {
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      font-size: 20px;
      font-weight: bold;
      color: #333;
    }

    .card-back {
      background-color: white;
      transform: rotateY(180deg);
      color: #c0392b;
    }

    .card-back img {
      width: 60%;
      max-width: 80px;
      height: auto;
      margin-bottom: 8px;
    }

    .card-back p {
      margin: 2px 0;
    }

    .matched {
      opacity: 0.7;
      pointer-events: none;
    }

    .welcome-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: #f5f0e6;
      background-image: radial-gradient(#f8d7da 1px, transparent 1px),
        radial-gradient(#f8d7da 1px, transparent 1px);
      background-size: 20px 20px;
      background-position: 0 0, 10px 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: opacity 0.5s ease-in-out;
    }

    .welcome-container {
      background-color: white;
      border-radius: 20px;
      padding: 2rem;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      text-align: center;
      max-width: 90%;
      width: 500px;
    }

    .start-btn {
      background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
      color: #fff;
      font-size: 1.2rem;
      font-weight: bold;
      padding: 0.8rem 2.5rem;
      border-radius: 50px;
      border: none;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 154, 158, 0.4);
      margin-top: 2rem;
    }

    .start-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 7px 20px rgba(255, 154, 158, 0.6);
    }

    .fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .game-container {
      opacity: 0;
      transition: opacity 0.5s ease-in-out;
    }

    .game-visible {
      opacity: 1;
    }

    /* Celebration */
    .celebration {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 100;
    }
    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: #f59e0b;
      opacity: 0.9;
      border-radius: 50%;
      animation: fall 3s linear forwards;
    }
    @keyframes fall {
      0% { transform: translateY(-10px) rotate(0deg); }
      100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
    }

    @media (max-width: 640px) {
      .card {
        max-width: 80px;
      }
      .card-front {
        font-size: 16px;
      }
      .card-back img {
        max-width: 60px;
      }
    }
  </style>
</head>
<body>
  <!-- Welcome Screen -->
  <div id="welcome-screen" class="welcome-screen">
    <div class="welcome-container">
      <h1 class="text-4xl font-bold text-red-800 mb-3">‰Ω†ÁöÑÂåÖÊúâ‰ªÄ‰πàÔºü</h1>
      <h2 class="text-2xl text-gray-700 mb-6">‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì?</h2>
      <p class="text-lg text-gray-600 mb-4">‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô</p>
      <p class="text-gray-500 mb-8">‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏à‡∏µ‡∏ô‡∏Å‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ú‡∏•‡πÑ‡∏°‡πâ‡πÉ‡∏´‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á</p>
      <button id="start-game-btn" class="start-btn">
        ÂºÄÂßãÊ∏∏Êàè <br /><span class="text-sm">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</span>
      </button>
    </div>
  </div>

  <!-- Game Container -->
  <div id="game-container" class="game-container min-h-screen py-8 px-4">
    <div class="max-w-4xl mx-auto">
      <header class="text-center mb-8">
        <h1 class="text-3xl font-bold text-red-800 mb-2">‰∏≠ÊñáÊ∞¥ÊûúÈÖçÂØπÊ∏∏Êàè</h1>
        <h2 class="text-xl text-gray-700">‡πÄ‡∏Å‡∏°‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô</h2>
        <div class="mt-4 bg-yellow-100 p-3 rounded-lg inline-block">
          <p class="text-gray-700">
            ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô: <span id="score" class="font-bold">0</span> | ‡πÄ‡∏ß‡∏•‡∏≤:
            <span id="timer" class="font-bold">60</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ | ‡∏Ñ‡∏π‡πà‡∏ó‡∏µ‡πà‡∏û‡∏ö:
            <span id="matches" class="font-bold">0</span>/10
          </p>
        </div>
      </header>

      <div class="bg-white rounded-xl p-6 shadow-lg">
        <div id="game-board" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4 justify-items-center"></div>
      </div>

      <div class="mt-6 text-center">
        <button id="restart-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-full shadow-md transition duration-300 ease-in-out transform hover:scale-105">
          ‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà
        </button>
        <button id="back-to-welcome-btn" class="ml-4 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-full shadow-md transition duration-300 ease-in-out transform hover:scale-105">
          ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
        </button>
      </div>
    </div>
  </div>

  <!-- Celebration & Win Modal -->
  <div id="celebration" class="celebration"></div>

  <div id="win-modal" class="fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50 hidden">
      <div class="bg-white rounded-xl p-8 max-w-md w-full shadow-2xl transform transition-all">
          <div class="text-center">
              <div class="text-5xl mb-4">üéâ</div>
              <h2 class="text-2xl font-bold text-red-800 mb-2">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢!</h2>
              <p class="text-lg mb-4">‡∏Ñ‡∏∏‡∏ì‡∏à‡∏±‡∏ö‡∏Ñ‡∏π‡πà‡∏ú‡∏•‡πÑ‡∏°‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</p>
              <p class="mb-6">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span id="final-score" class="font-bold text-xl">0</span></p>
              <button id="play-again-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-full shadow-md transition duration-300">
                  ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á
              </button>
              <button id="win-back-to-welcome-btn" class="mt-3 bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-full shadow-md transition duration-300">
                  ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å
              </button>
          </div>
      </div>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const welcomeScreen = document.getElementById("welcome-screen");
      const gameContainer = document.getElementById("game-container");
      const startGameBtn = document.getElementById("start-game-btn");
      const backToWelcomeBtn = document.getElementById("back-to-welcome-btn");
      const gameBoard = document.getElementById("game-board");
      const scoreElement = document.getElementById("score");
      const timerElement = document.getElementById("timer");
      const matchesElement = document.getElementById("matches");
      const restartBtn = document.getElementById("restart-btn");

      let score = 0;
      let timeLeft = 60;
      let matchesFound = 0;
      let timerInterval;
      let currentlyFlippedCards = [];
      let lockBoard = false;

      const fruits = [
        { name: "ËãπÊûú", pinyin: "p√≠ng gu«í", img: "apple.png" },
        { name: "È¶ôËïâ", pinyin: "xiƒÅng jiƒÅo", img: "banana.png" },
        { name: "Ê®±Ê°É", pinyin: "yƒ´ng t√°o", img: "cherry.png" },
        { name: "Ê¶¥Ëé≤", pinyin: "li√∫ li√°n", img: "durian.png" },
        { name: "Ëë°ËêÑ", pinyin: "p√∫ t√°o", img: "grapes.png" },
        { name: "ËäíÊûú", pinyin: "m√°ng gu«í", img: "mango.png" },
        { name: "Â±±Á´π", pinyin: "shƒÅn zh√∫", img: "mangosteen.png" },
        { name: "Ê©òÂ≠ê", pinyin: "j√∫ zi", img: "orange.png" },
        { name: "ËçâËéì", pinyin: "c«éo m√©i", img: "strawberry.png" },
        { name: "Ë•øÁìú", pinyin: "xƒ´ guƒÅ", img: "watermelon.png" },
      ];

      function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      function createCards() {
        gameBoard.innerHTML = "";
        const deck = [];
        fruits.forEach(f => deck.push({ ...f, type: "text" }));
        fruits.forEach(f => deck.push({ ...f, type: "image" }));
        shuffle(deck);

        deck.forEach(card => {
          const el = document.createElement("div");
          el.className = "card";
          el.dataset.name = card.name;

          el.innerHTML = `
            <div class="card-inner">
              <div class="card-front">
                ${
                  card.type === "text"
                    ? `<p class="text-center">${card.name}</p>`
                    : `<img src="images/${card.img}" alt="${card.name}" />`
                }
              </div>
              <div class="card-back">
                <img src="images/${card.img}" alt="${card.name}" />
                <p class="text-lg font-bold">${card.name}</p>
                <p class="text-sm text-gray-500">${card.pinyin}</p>
              </div>
            </div>`;

          el.addEventListener("click", flipCard);
          gameBoard.appendChild(el);
        });
      }

      function flipCard() {
        if (lockBoard || this.classList.contains("flipped") || this.classList.contains("matched")) return;
        this.classList.add("flipped");
        currentlyFlippedCards.push(this);

        if (currentlyFlippedCards.length === 2) checkForMatch();
      }

      function checkForMatch() {
        const [c1, c2] = currentlyFlippedCards;
        if (c1.dataset.name === c2.dataset.name) {
          c1.classList.add("matched");
          c2.classList.add("matched");
          updateScore(10);
          matchesFound++;
          matchesElement.textContent = matchesFound;

          if (matchesFound === 10) { // ‡∏ä‡∏ô‡∏∞‡πÄ‡∏Å‡∏°
            setTimeout(showWinModal, 500);
          }
        } else {
          lockBoard = true;
          setTimeout(() => {
            c1.classList.remove("flipped");
            c2.classList.remove("flipped");
            lockBoard = false;
          }, 1000);
          updateScore(-2);
        }
        currentlyFlippedCards = [];
      }

      function updateScore(p) {
        score += p;
        if (score < 0) score = 0;
        scoreElement.textContent = score;
      }

      function startTimer() {
        clearInterval(timerInterval);
        timeLeft = 60;
        timerElement.textContent = timeLeft;
        timerInterval = setInterval(() => {
          timeLeft--;
          timerElement.textContent = timeLeft;
          if (timeLeft <= 0) clearInterval(timerInterval);
        }, 1000);
      }

      function initGame() {
        score = 0;
        matchesFound = 0;
        scoreElement.textContent = score;
        matchesElement.textContent = matchesFound;
        lockBoard = false;
        currentlyFlippedCards = [];
        createCards();
        startTimer();
      }

      function showWinModal() {
        document.getElementById("final-score").textContent = score;
        document.getElementById("win-modal").classList.remove("hidden");
        triggerCelebration();
      }

      function triggerCelebration() {
        const celebration = document.getElementById("celebration");
        for (let i = 0; i < 100; i++) {
          const confetti = document.createElement("div");
          confetti.className = "confetti";
          confetti.style.left = Math.random() * 100 + "vw";
          confetti.style.backgroundColor = `hsl(${Math.random()*360}, 100%, 50%)`;
          confetti.style.animationDuration = 2 + Math.random() * 3 + "s";
          celebration.appendChild(confetti);

          setTimeout(() => { confetti.remove(); }, 5000);
        }
      }

      startGameBtn.addEventListener("click", () => {
        welcomeScreen.classList.add("fade-out");
        gameContainer.classList.add("game-visible");
        initGame();
      });

      restartBtn.addEventListener("click", initGame);

      backToWelcomeBtn.addEventListener("click", () => {
        welcomeScreen.classList.remove("fade-out");
        gameContainer.classList.remove("game-visible");
        clearInterval(timerInterval);
      });

      document.getElementById("play-again-btn").addEventListener("click", () => {
        document.getElementById("win-modal").classList.add("hidden");
        initGame();
      });

      document.getElementById("win-back-to-welcome-btn").addEventListener("click", () => {
        document.getElementById("win-modal").classList.add("hidden");
        welcomeScreen.classList.remove("fade-out");
        gameContainer.classList.remove("game-visible");
        clearInterval(timerInterval);
      });
    });
  </script>
</body>
</html>
